<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Online Photo Editor - Edit Images, Add Filters & Effects | PhotoEdit Pro</title>
    <meta name="description" content="Free professional online photo editor. Crop, resize, add filters, adjust brightness, contrast, saturation. Edit photos instantly in your browser - no download required!">
    <meta name="keywords" content="photo editor, online photo editor, free photo editor, image editor, edit photos online, crop image, resize image, photo filters, brightness contrast editor, photo editing tool">
    <meta name="robots" content="index, follow">
    <meta name="author" content="PhotoEdit Pro">
    <link rel="canonical" href="https://yourdomain.com/photo-editor">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Free Online Photo Editor - Professional Image Editing Tool">
    <meta property="og:description" content="Edit photos online for free. Crop, resize, add filters, adjust colors, draw, add text & more. No download required.">
    <meta property="og:url" content="https://yourdomain.com/photo-editor">
    <meta property="og:site_name" content="PhotoEdit Pro">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Online Photo Editor - Professional Image Editing Tool">
    <meta name="twitter:description" content="Edit photos online for free. Crop, resize, add filters, adjust colors, draw, add text & more.">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "PhotoEdit Pro - Online Photo Editor",
        "description": "Free professional online photo editor with filters, crop, resize, draw, text overlay and advanced color adjustments.",
        "url": "https://yourdomain.com/photo-editor",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "All",
        "browserRequirements": "Requires JavaScript",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": "Photo Editing, Image Filters, Crop, Resize, Brightness Adjustment, Contrast, Saturation, Text Overlay, Drawing Tool, Rotate, Flip"
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Is this photo editor completely free?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, PhotoEdit Pro is 100% free to use. No registration, no watermarks, and no hidden charges. Edit unlimited photos directly in your browser."
                }
            },
            {
                "@type": "Question",
                "name": "Do I need to download any software?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No download is required. PhotoEdit Pro runs entirely in your web browser. Just upload your image and start editing instantly."
                }
            },
            {
                "@type": "Question",
                "name": "What image formats are supported?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Our photo editor supports JPG, JPEG, PNG, GIF, BMP, WebP and SVG image formats. You can export your edited photos in PNG or JPEG format."
                }
            }
        ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6c5ce7;
            --primary-dark: #5a4bd1;
            --secondary: #00cec9;
            --accent: #fd79a8;
            --dark: #2d3436;
            --darker: #1e272e;
            --light: #dfe6e9;
            --white: #ffffff;
            --sidebar-width: 320px;
            --header-height: 60px;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--darker);
            color: var(--white);
            overflow: hidden;
            height: 100vh;
        }

        /* ===== HEADER ===== */
        .app-header {
            height: var(--header-height);
            background: linear-gradient(135deg, #1e272e, #2d3436);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            z-index: 100;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            font-weight: 800;
        }

        .logo-icon {
            width: 38px;
            height: 38px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .logo span {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .header-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-upload {
            background: var(--primary);
            color: white;
        }

        .btn-upload:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-undo {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .btn-undo:hover {
            background: rgba(255,255,255,0.2);
        }

        .btn-download {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
        }

        .btn-download:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0,206,201,0.4);
        }

        .btn-reset {
            background: rgba(255,255,255,0.08);
            color: #ff7675;
        }

        .btn-reset:hover {
            background: rgba(255,118,117,0.2);
        }

        /* ===== MAIN LAYOUT ===== */
        .app-layout {
            display: flex;
            height: calc(100vh - var(--header-height));
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: var(--sidebar-width);
            background: #1e272e;
            border-right: 1px solid rgba(255,255,255,0.06);
            overflow-y: auto;
            overflow-x: hidden;
            flex-shrink: 0;
        }

        .sidebar::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.15);
            border-radius: 4px;
        }

        /* Sidebar Tabs */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .sidebar-tab {
            flex: 1;
            padding: 12px 5px;
            text-align: center;
            font-size: 0.7rem;
            font-weight: 600;
            color: rgba(255,255,255,0.5);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .sidebar-tab:hover {
            color: rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.03);
        }

        .sidebar-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(108,92,231,0.08);
        }

        .sidebar-tab .tab-icon {
            font-size: 1.2rem;
            display: block;
            margin-bottom: 3px;
        }

        /* Sidebar Panels */
        .sidebar-panel {
            display: none;
            padding: 15px;
        }

        .sidebar-panel.active {
            display: block;
        }

        .panel-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        /* Slider Control */
        .slider-group {
            margin-bottom: 18px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .slider-label span {
            font-size: 0.85rem;
            font-weight: 500;
            color: rgba(255,255,255,0.8);
        }

        .slider-value {
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 700;
            background: rgba(108,92,231,0.15);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .slider-control {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.1);
            outline: none;
            cursor: pointer;
        }

        .slider-control::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(108,92,231,0.4);
            transition: transform 0.2s;
        }

        .slider-control::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-control::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
        }

        /* Filter Grid */
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .filter-item {
            background: rgba(255,255,255,0.05);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 10px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
        }

        .filter-item:hover {
            background: rgba(108,92,231,0.15);
            border-color: rgba(108,92,231,0.3);
            color: white;
        }

        .filter-item.active {
            background: rgba(108,92,231,0.2);
            border-color: var(--primary);
            color: var(--primary);
        }

        .filter-item .filter-icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 5px;
        }

        /* Transform Buttons */
        .transform-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .transform-btn {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.8);
            padding: 14px 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .transform-btn:hover {
            background: rgba(108,92,231,0.15);
            border-color: var(--primary);
            color: white;
        }

        .transform-btn .t-icon {
            font-size: 1.3rem;
        }

        /* Draw Tools */
        .draw-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .color-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-row label {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.7);
            min-width: 80px;
        }

        .color-row input[type="color"] {
            width: 40px;
            height: 35px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            cursor: pointer;
            background: transparent;
            padding: 2px;
        }

        .draw-mode-btns {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 5px;
        }

        .draw-mode-btn {
            padding: 10px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: rgba(255,255,255,0.8);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
        }

        .draw-mode-btn:hover, .draw-mode-btn.active {
            background: rgba(108,92,231,0.2);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Text Panel */
        .text-input-group {
            margin-bottom: 12px;
        }

        .text-input-group label {
            display: block;
            font-size: 0.85rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 6px;
        }

        .text-input-group input,
        .text-input-group select,
        .text-input-group textarea {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .text-input-group textarea {
            resize: vertical;
            min-height: 60px;
        }

        .text-input-group input:focus,
        .text-input-group select:focus,
        .text-input-group textarea:focus {
            border-color: var(--primary);
        }

        .text-input-group select option {
            background: var(--darker);
        }

        .btn-add-text {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-add-text:hover {
            background: var(--primary-dark);
        }

        /* Crop Panel */
        .crop-presets {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .crop-preset-btn {
            padding: 10px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: rgba(255,255,255,0.8);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
        }

        .crop-preset-btn:hover, .crop-preset-btn.active {
            background: rgba(108,92,231,0.2);
            border-color: var(--primary);
            color: var(--primary);
        }

        .crop-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .crop-actions button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .btn-crop-apply {
            background: #00b894;
            color: white;
        }

        .btn-crop-cancel {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        /* Resize Panel */
        .resize-inputs {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            margin-bottom: 12px;
        }

        .resize-inputs .text-input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .lock-ratio {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
        }

        .lock-ratio input {
            accent-color: var(--primary);
        }

        /* Export Panel */
        .export-format {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .format-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.06);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: rgba(255,255,255,0.8);
            cursor: pointer;
            text-align: center;
            font-weight: 700;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .format-btn.active {
            border-color: var(--primary);
            background: rgba(108,92,231,0.15);
            color: var(--primary);
        }

        .format-btn:hover {
            border-color: var(--primary);
        }

        .btn-export {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,206,201,0.3);
        }

        /* ===== CANVAS AREA ===== */
        .canvas-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #1a1a2e;
            position: relative;
            overflow: hidden;
        }

        .canvas-area::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(45deg, #16213e 25%, transparent 25%),
                linear-gradient(-45deg, #16213e 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #16213e 75%),
                linear-gradient(-45deg, transparent 75%, #16213e 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            opacity: 0.3;
        }

        .canvas-wrapper {
            position: relative;
            z-index: 1;
            max-width: 90%;
            max-height: 90%;
        }

        #photoCanvas {
            max-width: 100%;
            max-height: calc(100vh - var(--header-height) - 80px);
            border-radius: 4px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            cursor: crosshair;
        }

        /* Upload Placeholder */
        .upload-placeholder {
            text-align: center;
            z-index: 2;
            position: relative;
        }

        .upload-placeholder .upload-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            opacity: 0.6;
        }

        .upload-placeholder h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: rgba(255,255,255,0.7);
        }

        .upload-placeholder p {
            color: rgba(255,255,255,0.4);
            margin-bottom: 25px;
        }

        .upload-area {
            width: 350px;
            max-width: 90vw;
            border: 3px dashed rgba(108,92,231,0.4);
            border-radius: 16px;
            padding: 40px 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(108,92,231,0.05);
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(108,92,231,0.1);
        }

        .upload-area .browse-btn {
            display: inline-block;
            padding: 12px 30px;
            background: var(--primary);
            color: white;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            margin-top: 10px;
        }

        /* Canvas Info Bar */
        .canvas-info {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.7);
            z-index: 5;
            display: none;
        }

        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            bottom: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
            z-index: 5;
        }

        .zoom-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: rgba(0,0,0,0.6);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .zoom-btn:hover {
            background: var(--primary);
        }

        /* Crop Overlay */
        .crop-overlay {
            position: absolute;
            border: 2px dashed var(--primary);
            background: rgba(108,92,231,0.1);
            cursor: move;
            display: none;
            z-index: 10;
        }

        .crop-handle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--primary);
            border: 2px solid white;
            border-radius: 50%;
        }

        .crop-handle.tl { top: -6px; left: -6px; cursor: nw-resize; }
        .crop-handle.tr { top: -6px; right: -6px; cursor: ne-resize; }
        .crop-handle.bl { bottom: -6px; left: -6px; cursor: sw-resize; }
        .crop-handle.br { bottom: -6px; right: -6px; cursor: se-resize; }

        /* History Panel */
        .history-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.04);
            border-radius: 8px;
            margin-bottom: 6px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
            cursor: pointer;
            transition: all 0.3s;
        }

        .history-item:hover {
            background: rgba(108,92,231,0.1);
            color: white;
        }

        .history-item .h-icon {
            font-size: 1rem;
        }

        .history-item .h-time {
            margin-left: auto;
            font-size: 0.7rem;
            color: rgba(255,255,255,0.3);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .app-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: 45vh;
                border-right: none;
                border-top: 1px solid rgba(255,255,255,0.08);
                order: 2;
            }

            .canvas-area {
                height: 55vh;
                order: 1;
            }

            .header-btn span.btn-text {
                display: none;
            }

            .header-btn {
                padding: 8px 10px;
            }

            #photoCanvas {
                max-height: calc(55vh - 60px);
            }
        }

        @media (max-width: 500px) {
            .logo span {
                font-size: 1rem;
            }

            .sidebar-tab {
                font-size: 0.6rem;
                padding: 10px 3px;
            }

            .sidebar-tab .tab-icon {
                font-size: 1rem;
            }

            .filter-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ===== SEO CONTENT (below editor) ===== */
        .seo-content {
            display: none;
        }

        body.show-content .seo-content {
            display: block;
        }

        .seo-section {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            color: #ccc;
            line-height: 1.8;
        }

        .seo-section h2 {
            color: var(--primary);
            font-size: 1.5rem;
            margin: 30px 0 15px;
        }

        .seo-section h3 {
            color: rgba(255,255,255,0.8);
            margin: 20px 0 10px;
        }

        .seo-section p {
            margin-bottom: 15px;
            color: rgba(255,255,255,0.6);
        }

        .seo-section ul, .seo-section ol {
            padding-left: 25px;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.6);
        }

        .seo-section li {
            margin-bottom: 5px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 14px 24px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            z-index: 1000;
            transform: translateX(120%);
            transition: transform 0.4s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
        }

        .notification.error {
            background: linear-gradient(135deg, #e17055, #d63031);
            color: white;
        }

        .notification.info {
            background: linear-gradient(135deg, var(--primary), #a29bfe);
            color: white;
        }

        /* Loading */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .loading-overlay.show {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <!-- Header -->
    <header class="app-header">
        <div class="logo">
            <div class="logo-icon">üì∑</div>
            <span>PhotoEdit Pro</span>
        </div>
        <div class="header-actions">
            <button class="header-btn btn-upload" onclick="document.getElementById('fileInput').click()">
                üìÅ <span class="btn-text">Open</span>
            </button>
            <input type="file" id="fileInput" accept="image/*" style="display:none" onchange="loadImage(event)">
            <button class="header-btn btn-undo" onclick="undo()" title="Undo">‚Ü©Ô∏è <span class="btn-text">Undo</span></button>
            <button class="header-btn btn-undo" onclick="redo()" title="Redo">‚Ü™Ô∏è <span class="btn-text">Redo</span></button>
            <button class="header-btn btn-reset" onclick="resetAll()" title="Reset">üóëÔ∏è <span class="btn-text">Reset</span></button>
            <button class="header-btn btn-download" onclick="downloadImage()" title="Download">üíæ <span class="btn-text">Save</span></button>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="app-layout">

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Tabs -->
            <div class="sidebar-tabs">
                <div class="sidebar-tab active" onclick="switchTab('adjust', this)">
                    <span class="tab-icon">üé®</span>Adjust
                </div>
                <div class="sidebar-tab" onclick="switchTab('filters', this)">
                    <span class="tab-icon">‚ú®</span>Filters
                </div>
                <div class="sidebar-tab" onclick="switchTab('transform', this)">
                    <span class="tab-icon">üîÑ</span>Transform
                </div>
                <div class="sidebar-tab" onclick="switchTab('draw', this)">
                    <span class="tab-icon">üñåÔ∏è</span>Draw
                </div>
                <div class="sidebar-tab" onclick="switchTab('text', this)">
                    <span class="tab-icon">üìù</span>Text
                </div>
                <div class="sidebar-tab" onclick="switchTab('crop', this)">
                    <span class="tab-icon">‚úÇÔ∏è</span>Crop
                </div>
                <div class="sidebar-tab" onclick="switchTab('export', this)">
                    <span class="tab-icon">üíæ</span>Export
                </div>
            </div>

            <!-- Adjust Panel -->
            <div class="sidebar-panel active" id="panel-adjust">
                <div class="panel-title">üé® Color Adjustments</div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>‚òÄÔ∏è Brightness</span>
                        <span class="slider-value" id="val-brightness">100%</span>
                    </div>
                    <input type="range" class="slider-control" id="brightness" min="0" max="200" value="100" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üî≤ Contrast</span>
                        <span class="slider-value" id="val-contrast">100%</span>
                    </div>
                    <input type="range" class="slider-control" id="contrast" min="0" max="200" value="100" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üåà Saturation</span>
                        <span class="slider-value" id="val-saturate">100%</span>
                    </div>
                    <input type="range" class="slider-control" id="saturate" min="0" max="200" value="100" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üé° Hue Rotate</span>
                        <span class="slider-value" id="val-hue">0¬∞</span>
                    </div>
                    <input type="range" class="slider-control" id="hue" min="0" max="360" value="0" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üå´Ô∏è Blur</span>
                        <span class="slider-value" id="val-blur">0px</span>
                    </div>
                    <input type="range" class="slider-control" id="blur" min="0" max="20" value="0" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>‚¨õ Grayscale</span>
                        <span class="slider-value" id="val-grayscale">0%</span>
                    </div>
                    <input type="range" class="slider-control" id="grayscale" min="0" max="100" value="0" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üü§ Sepia</span>
                        <span class="slider-value" id="val-sepia">0%</span>
                    </div>
                    <input type="range" class="slider-control" id="sepia" min="0" max="100" value="0" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üîÄ Invert</span>
                        <span class="slider-value" id="val-invert">0%</span>
                    </div>
                    <input type="range" class="slider-control" id="invert" min="0" max="100" value="0" oninput="applyAdjustments()">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>üí° Opacity</span>
                        <span class="slider-value" id="val-opacity">100%</span>
                    </div>
                    <input type="range" class="slider-control" id="opacity" min="0" max="100" value="100" oninput="applyAdjustments()">
                </div>
            </div>

            <!-- Filters Panel -->
            <div class="sidebar-panel" id="panel-filters">
                <div class="panel-title">‚ú® Photo Filters</div>
                <div class="filter-grid">
                    <div class="filter-item active" onclick="applyFilter('none', this)">
                        <span class="filter-icon">üñºÔ∏è</span>None
                    </div>
                    <div class="filter-item" onclick="applyFilter('vintage', this)">
                        <span class="filter-icon">üìú</span>Vintage
                    </div>
                    <div class="filter-item" onclick="applyFilter('warm', this)">
                        <span class="filter-icon">üî•</span>Warm
                    </div>
                    <div class="filter-item" onclick="applyFilter('cool', this)">
                        <span class="filter-icon">‚ùÑÔ∏è</span>Cool
                    </div>
                    <div class="filter-item" onclick="applyFilter('dramatic', this)">
                        <span class="filter-icon">üé≠</span>Dramatic
                    </div>
                    <div class="filter-item" onclick="applyFilter('noir', this)">
                        <span class="filter-icon">‚¨õ</span>Noir
                    </div>
                    <div class="filter-item" onclick="applyFilter('fade', this)">
                        <span class="filter-icon">üåÅ</span>Fade
                    </div>
                    <div class="filter-item" onclick="applyFilter('vivid', this)">
                        <span class="filter-icon">üåü</span>Vivid
                    </div>
                    <div class="filter-item" onclick="applyFilter('sunset', this)">
                        <span class="filter-icon">üåÖ</span>Sunset
                    </div>
                    <div class="filter-item" onclick="applyFilter('ocean', this)">
                        <span class="filter-icon">üåä</span>Ocean
                    </div>
                    <div class="filter-item" onclick="applyFilter('forest', this)">
                        <span class="filter-icon">üå≤</span>Forest
                    </div>
                    <div class="filter-item" onclick="applyFilter('retro', this)">
                        <span class="filter-icon">üìª</span>Retro
                    </div>
                    <div class="filter-item" onclick="applyFilter('cinema', this)">
                        <span class="filter-icon">üé¨</span>Cinema
                    </div>
                    <div class="filter-item" onclick="applyFilter('neon', this)">
                        <span class="filter-icon">üíú</span>Neon
                    </div>
                    <div class="filter-item" onclick="applyFilter('pastel', this)">
                        <span class="filter-icon">üéÄ</span>Pastel
                    </div>
                </div>
            </div>

            <!-- Transform Panel -->
            <div class="sidebar-panel" id="panel-transform">
                <div class="panel-title">üîÑ Transform & Rotate</div>
                <div class="transform-grid">
                    <button class="transform-btn" onclick="rotateImage(90)">
                        <span class="t-icon">‚Üª</span>Rotate 90¬∞ ‚Üí
                    </button>
                    <button class="transform-btn" onclick="rotateImage(-90)">
                        <span class="t-icon">‚Ü∫</span>Rotate 90¬∞ ‚Üê
                    </button>
                    <button class="transform-btn" onclick="rotateImage(180)">
                        <span class="t-icon">üîÉ</span>Rotate 180¬∞
                    </button>
                    <button class="transform-btn" onclick="flipImage('horizontal')">
                        <span class="t-icon">‚ÜîÔ∏è</span>Flip H
                    </button>
                    <button class="transform-btn" onclick="flipImage('vertical')">
                        <span class="t-icon">‚ÜïÔ∏è</span>Flip V
                    </button>
                    <button class="transform-btn" onclick="rotateImage(45)">
                        <span class="t-icon">üìê</span>Rotate 45¬∞
                    </button>
                </div>

                <div class="panel-title" style="margin-top: 20px;">üìè Custom Rotation</div>
                <div class="slider-group">
                    <div class="slider-label">
                        <span>Angle</span>
                        <span class="slider-value" id="val-rotation">0¬∞</span>
                    </div>
                    <input type="range" class="slider-control" id="customRotation" min="-180" max="180" value="0" oninput="customRotate()">
                </div>
            </div>

            <!-- Draw Panel -->
            <div class="sidebar-panel" id="panel-draw">
                <div class="panel-title">üñåÔ∏è Drawing Tools</div>
                <div class="draw-options">
                    <div class="draw-mode-btns">
                        <button class="draw-mode-btn active" onclick="setDrawMode('brush', this)">üñåÔ∏è Brush</button>
                        <button class="draw-mode-btn" onclick="setDrawMode('eraser', this)">üßΩ Eraser</button>
                        <button class="draw-mode-btn" onclick="setDrawMode('line', this)">üìè Line</button>
                        <button class="draw-mode-btn" onclick="setDrawMode('rect', this)">‚¨ú Rectangle</button>
                        <button class="draw-mode-btn" onclick="setDrawMode('circle', this)">‚≠ï Circle</button>
                        <button class="draw-mode-btn" onclick="setDrawMode('arrow', this)">‚û°Ô∏è Arrow</button>
                    </div>

                    <div class="color-row">
                        <label>Stroke Color</label>
                        <input type="color" id="drawColor" value="#ff0000">
                    </div>

                    <div class="color-row">
                        <label>Fill Color</label>
                        <input type="color" id="fillColor" value="#ffffff">
                        <label class="lock-ratio" style="min-width: auto;">
                            <input type="checkbox" id="useFill"> Fill
                        </label>
                    </div>

                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Brush Size</span>
                            <span class="slider-value" id="val-brushSize">5px</span>
                        </div>
                        <input type="range" class="slider-control" id="brushSize" min="1" max="50" value="5" oninput="document.getElementById('val-brushSize').textContent = this.value + 'px'">
                    </div>

                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Opacity</span>
                            <span class="slider-value" id="val-drawOpacity">100%</span>
                        </div>
                        <input type="range" class="slider-control" id="drawOpacity" min="1" max="100" value="100" oninput="document.getElementById('val-drawOpacity').textContent = this.value + '%'">
                    </div>
                </div>
            </div>

            <!-- Text Panel -->
            <div class="sidebar-panel" id="panel-text">
                <div class="panel-title">üìù Add Text</div>

                <div class="text-input-group">
                    <label>Text Content</label>
                    <textarea id="textContent" placeholder="Type your text here...">Hello World</textarea>
                </div>

                <div class="text-input-group">
                    <label>Font Family</label>
                    <select id="textFont">
                        <option value="Arial">Arial</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Impact">Impact</option>
                        <option value="Comic Sans MS">Comic Sans MS</option>
                        <option value="Trebuchet MS">Trebuchet MS</option>
                        <option value="Palatino">Palatino</option>
                    </select>
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>Font Size</span>
                        <span class="slider-value" id="val-fontSize">32px</span>
                    </div>
                    <input type="range" class="slider-control" id="textSize" min="10" max="200" value="32" oninput="document.getElementById('val-fontSize').textContent = this.value + 'px'">
                </div>

                <div class="color-row">
                    <label>Text Color</label>
                    <input type="color" id="textColor" value="#ffffff">
                </div>

                <div class="color-row">
                    <label>Stroke Color</label>
                    <input type="color" id="textStroke" value="#000000">
                </div>

                <div class="slider-group">
                    <div class="slider-label">
                        <span>Stroke Width</span>
                        <span class="slider-value" id="val-strokeWidth">2px</span>
                    </div>
                    <input type="range" class="slider-control" id="strokeWidth" min="0" max="10" value="2" oninput="document.getElementById('val-strokeWidth').textContent = this.value + 'px'">
                </div>

                <div class="draw-mode-btns" style="margin-bottom: 10px;">
                    <button class="draw-mode-btn active" id="boldBtn" onclick="this.classList.toggle('active')">
                        <strong>B</strong> Bold
                    </button>
                    <button class="draw-mode-btn" id="italicBtn" onclick="this.classList.toggle('active')">
                        <em>I</em> Italic
                    </button>
                </div>

                <button class="btn-add-text" onclick="addText()">‚úèÔ∏è Add Text to Image</button>
                <p style="font-size:0.75rem; color:rgba(255,255,255,0.4); margin-top:8px; text-align:center;">
                    Click on the image where you want to place the text
                </p>
            </div>

            <!-- Crop Panel -->
            <div class="sidebar-panel" id="panel-crop">
                <div class="panel-title">‚úÇÔ∏è Crop Image</div>

                <div class="crop-presets">
                    <button class="crop-preset-btn" onclick="setCropRatio('free', this)">üîì Free</button>
                    <button class="crop-preset-btn" onclick="setCropRatio('1:1', this)">‚¨ú 1:1</button>
                    <button class="crop-preset-btn" onclick="setCropRatio('4:3', this)">üñºÔ∏è 4:3</button>
                    <button class="crop-preset-btn" onclick="setCropRatio('16:9', this)">üì∫ 16:9</button>
                    <button class="crop-preset-btn" onclick="setCropRatio('3:2', this)">üì∑ 3:2</button>
                    <button class="crop-preset-btn" onclick="setCropRatio('9:16', this)">üì± 9:16</button>
                </div>

                <div class="panel-title">üìè Manual Crop Size</div>
                <div class="resize-inputs">
                    <div class="text-input-group">
                        <label>X Position</label>
                        <input type="number" id="cropX" value="0" min="0">
                    </div>
                    <div class="text-input-group">
                        <label>Y Position</label>
                        <input type="number" id="cropY" value="0" min="0">
                    </div>
                </div>
                <div class="resize-inputs">
                    <div class="text-input-group">
                        <label>Width</label>
                        <input type="number" id="cropW" value="200" min="1">
                    </div>
                    <div class="text-input-group">
                        <label>Height</label>
                        <input type="number" id="cropH" value="200" min="1">
                    </div>
                </div>

                <div class="crop-actions">
                    <button class="btn-crop-apply" onclick="applyCrop()">‚úÖ Apply Crop</button>
                    <button class="btn-crop-cancel" onclick="cancelCrop()">‚ùå Cancel</button>
                </div>
            </div>

            <!-- Export Panel -->
            <div class="sidebar-panel" id="panel-export">
                <div class="panel-title">üíæ Export & Download</div>

                <div class="text-input-group">
                    <label>File Name</label>
                    <input type="text" id="fileName" value="photoedit-pro-image" placeholder="Enter file name">
                </div>

                <div class="panel-title" style="margin-top: 15px;">Format</div>
                <div class="export-format">
                    <div class="format-btn active" onclick="setFormat('png', this)">PNG</div>
                    <div class="format-btn" onclick="setFormat('jpeg', this)">JPEG</div>
                    <div class="format-btn" onclick="setFormat('webp', this)">WebP</div>
                </div>

                <div class="slider-group" id="qualitySlider">
                    <div class="slider-label">
                        <span>Quality</span>
                        <span class="slider-value" id="val-quality">92%</span>
                    </div>
                    <input type="range" class="slider-control" id="exportQuality" min="10" max="100" value="92" oninput="document.getElementById('val-quality').textContent = this.value + '%'">
                </div>

                <div class="panel-title" style="margin-top: 15px;">üìê Resize Before Export</div>
                <div class="resize-inputs">
                    <div class="text-input-group">
                        <label>Width (px)</label>
                        <input type="number" id="exportWidth" placeholder="Auto" min="1">
                    </div>
                    <div class="text-input-group">
                        <label>Height (px)</label>
                        <input type="number" id="exportHeight" placeholder="Auto" min="1">
                    </div>
                </div>
                <label class="lock-ratio">
                    <input type="checkbox" id="lockAspect" checked> üîí Lock Aspect Ratio
                </label>

                <button class="btn-export" onclick="exportImage()">üíæ Download Image</button>

                <div class="panel-title" style="margin-top: 20px;">üìä Image Info</div>
                <div class="history-item">
                    <span class="h-icon">üìê</span>
                    <span>Dimensions: <span id="imgDimensions">-</span></span>
                </div>
                <div class="history-item">
                    <span class="h-icon">üìÑ</span>
                    <span>Original Size: <span id="imgSize">-</span></span>
                </div>
            </div>

        </aside>

        <!-- Canvas Area -->
        <main class="canvas-area" id="canvasArea">
            <!-- Upload Placeholder -->
            <div class="upload-placeholder" id="uploadPlaceholder">
                <div class="upload-area" onclick="document.getElementById('fileInput').click()" id="dropZone">
                    <div class="upload-icon">üì∑</div>
                    <h2>Upload Your Photo</h2>
                    <p>Drag & drop an image here or click to browse</p>
                    <div class="browse-btn">üìÅ Choose Image</div>
                </div>
            </div>

            <!-- Canvas Wrapper -->
            <div class="canvas-wrapper" id="canvasWrapper" style="display:none;">
                <canvas id="photoCanvas"></canvas>
            </div>

            <!-- Canvas Info -->
            <div class="canvas-info" id="canvasInfo">
                <span id="canvasDimText">-</span> | Zoom: <span id="zoomLevel">100%</span>
            </div>

            <!-- Zoom Controls -->
            <div class="zoom-controls" style="display:none;" id="zoomControls">
                <button class="zoom-btn" onclick="zoomCanvas(0.1)" title="Zoom In">+</button>
                <button class="zoom-btn" onclick="zoomCanvas(-0.1)" title="Zoom Out">‚àí</button>
                <button class="zoom-btn" onclick="zoomCanvas(0)" title="Fit">‚ä°</button>
            </div>
        </main>
    </div>

    <!-- Hidden SEO Content (for crawlers) -->
    <div class="seo-content">
        <article class="seo-section">
            <h2>Free Online Photo Editor - Edit Images Instantly</h2>
            <p>Welcome to <strong>PhotoEdit Pro</strong>, the most powerful free online photo editor available on the web. Our browser-based image editing tool lets you edit, enhance, and transform your photos without downloading any software. Whether you're a professional photographer, graphic designer, social media manager, or just someone who wants to make their photos look better ‚Äî PhotoEdit Pro has everything you need.</p>

            <h2>Features of PhotoEdit Pro</h2>
            <h3>üé® Advanced Color Adjustments</h3>
            <p>Fine-tune your images with professional-grade color controls including brightness, contrast, saturation, hue rotation, blur, grayscale, sepia, invert, and opacity adjustments. Each slider provides real-time preview so you can see changes instantly.</p>

            <h3>‚ú® Beautiful Photo Filters</h3>
            <p>Apply stunning one-click filters to your photos. Choose from 15 preset filters including Vintage, Warm, Cool, Dramatic, Noir, Fade, Vivid, Sunset, Ocean, Forest, Retro, Cinema, Neon, and Pastel. Each filter is carefully crafted to give your photos a professional look.</p>

            <h3>üîÑ Transform & Rotate</h3>
            <p>Rotate your images by 90¬∞, 180¬∞, or any custom angle. Flip images horizontally or vertically. Our transform tools give you complete control over image orientation.</p>

            <h3>üñåÔ∏è Drawing Tools</h3>
            <p>Draw directly on your images with our comprehensive drawing toolkit. Use brushes, lines, rectangles, circles, and arrows. Customize stroke color, fill color, brush size, and opacity for precise annotations and creative designs.</p>

            <h3>üìù Text Overlay</h3>
            <p>Add custom text to your images with full control over font family, size, color, stroke, bold, and italic styling. Perfect for creating social media posts, memes, watermarks, and promotional graphics.</p>

            <h3>‚úÇÔ∏è Crop & Resize</h3>
            <p>Crop your images to any size with preset aspect ratios (1:1, 4:3, 16:9, 3:2, 9:16) or custom dimensions. Resize images before export to meet specific requirements for social media, websites, or print.</p>

            <h2>How to Use PhotoEdit Pro</h2>
            <ol>
                <li><strong>Upload your image</strong> ‚Äî Click "Open" or drag and drop your photo into the editor.</li>
                <li><strong>Edit your photo</strong> ‚Äî Use the sidebar tools to adjust colors, apply filters, draw, add text, crop, or transform.</li>
                <li><strong>Export & download</strong> ‚Äî Save your edited image in PNG, JPEG, or WebP format with custom quality settings.</li>
            </ol>

            <h2>Supported Image Formats</h2>
            <p>PhotoEdit Pro supports all major image formats for both import and export:</p>
            <ul>
                <li><strong>Import:</strong> JPG, JPEG, PNG, GIF, BMP, WebP, SVG</li>
                <li><strong>Export:</strong> PNG (lossless), JPEG (compressed), WebP (modern format)</li>
            </ul>

            <h2>Why Choose PhotoEdit Pro?</h2>
            <ul>
                <li>‚úÖ <strong>100% Free</strong> ‚Äî No hidden charges, no premium plans</li>
                <li>‚úÖ <strong>No Registration</strong> ‚Äî Start editing immediately, no sign-up required</li>
                <li>‚úÖ <strong>No Watermarks</strong> ‚Äî Download clean, watermark-free images</li>
                <li>‚úÖ <strong>Privacy First</strong> ‚Äî All editing happens in your browser. We never upload your photos to any server</li>
                <li>‚úÖ <strong>No Download Required</strong> ‚Äî Works entirely in your web browser</li>
                <li>‚úÖ <strong>Mobile Friendly</strong> ‚Äî Works on phones, tablets, and desktops</li>
                <li>‚úÖ <strong>Professional Tools</strong> ‚Äî Same features found in premium desktop software</li>
                <li>‚úÖ <strong>Undo/Redo Support</strong> ‚Äî Never worry about making mistakes</li>
            </ul>

            <h2>Use Cases for Online Photo Editing</h2>
            <ul>
                <li><strong>Social Media:</strong> Create eye-catching posts for Instagram, Facebook, Twitter, and LinkedIn</li>
                <li><strong>E-commerce:</strong> Edit product photos for online stores</li>
                <li><strong>Blogging:</strong> Optimize and enhance images for blog posts</li>
                <li><strong>Presentations:</strong> Prepare professional images for slideshows</li>
                <li><strong>Personal Use:</strong> Enhance family photos, vacation pictures, and selfies</li>
                <li><strong>Marketing:</strong> Create promotional graphics and banners</li>
            </ul>

            <h2>Frequently Asked Questions</h2>
            <h3>Is this photo editor completely free?</h3>
            <p>Yes, PhotoEdit Pro is 100% free to use. There are no hidden charges, no premium tiers, and no watermarks added to your exported images.</p>

            <h3>Do I need to download any software?</h3>
            <p>No, PhotoEdit Pro runs entirely in your web browser. Simply visit the page, upload your image, and start editing. It works on Chrome, Firefox, Safari, Edge, and all modern browsers.</p>

            <h3>Are my photos uploaded to a server?</h3>
            <p>No. All image processing happens locally in your browser using HTML5 Canvas technology. Your photos never leave your device, ensuring complete privacy and security.</p>

            <h3>What is the maximum image size supported?</h3>
            <p>PhotoEdit Pro can handle images up to 10,000 x 10,000 pixels, depending on your device's memory. For optimal performance, we recommend images under 5000 x 5000 pixels.</p>

            <h3>Can I edit multiple photos at once?</h3>
            <p>Currently, PhotoEdit Pro supports editing one image at a time. Save your current work before opening a new image.</p>
        </article>
    </div>

    <!-- JavaScript -->
    <script>
        // ===== GLOBAL STATE =====
        let canvas, ctx;
        let originalImage = null;
        let currentImage = null;
        let history = [];
        let historyIndex = -1;
        let maxHistory = 30;
        let currentZoom = 1;
        let exportFormat = 'png';
        let drawMode = 'brush';
        let isDrawing = false;
        let drawStartX, drawStartY;
        let currentFilter = 'none';
        let rotationAngle = 0;
        let textMode = false;

        // ===== INITIALIZATION =====
        window.addEventListener('DOMContentLoaded', () => {
            canvas = document.getElementById('photoCanvas');
            ctx = canvas.getContext('2d', { willReadFrequently: true });

            // Drag & Drop
            const dropZone = document.getElementById('dropZone');
            const canvasArea = document.getElementById('canvasArea');

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
                canvasArea.addEventListener(e, preventDefaults);
                dropZone.addEventListener(e, preventDefaults);
            });

            canvasArea.addEventListener('drop', handleDrop);
            dropZone.addEventListener('drop', handleDrop);

            ['dragenter', 'dragover'].forEach(e => {
                dropZone.addEventListener(e, () => dropZone.style.borderColor = 'var(--primary)');
            });

            ['dragleave', 'drop'].forEach(e => {
                dropZone.addEventListener(e, () => dropZone.style.borderColor = 'rgba(108,92,231,0.4)');
            });

            // Canvas events
            canvas.addEventListener('mousedown', onCanvasMouseDown);
            canvas.addEventListener('mousemove', onCanvasMouseMove);
            canvas.addEventListener('mouseup', onCanvasMouseUp);
            canvas.addEventListener('mouseleave', onCanvasMouseUp);

            // Touch events
            canvas.addEventListener('touchstart', onCanvasTouchStart, { passive: false });
            canvas.addEventListener('touchmove', onCanvasTouchMove, { passive: false });
            canvas.addEventListener('touchend', onCanvasMouseUp);

            // Export width/height link
            document.getElementById('exportWidth').addEventListener('input', function() {
                if (document.getElementById('lockAspect').checked && originalImage) {
                    const ratio = originalImage.height / originalImage.width;
                    document.getElementById('exportHeight').value = Math.round(this.value * ratio);
                }
            });
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function handleDrop(e) {
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                loadImageFromFile(files[0]);
            }
        }

        // ===== IMAGE LOADING =====
        function loadImage(event) {
            const file = event.target.files[0];
            if (file) loadImageFromFile(file);
        }

        function loadImageFromFile(file) {
            if (!file.type.startsWith('image/')) {
                showNotification('Please select a valid image file!', 'error');
                return;
            }

            showLoading(true);
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    currentImage = img;

                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);

                    document.getElementById('uploadPlaceholder').style.display = 'none';
                    document.getElementById('canvasWrapper').style.display = 'block';
                    document.getElementById('canvasInfo').style.display = 'block';
                    document.getElementById('zoomControls').style.display = 'flex';

                    updateImageInfo();
                    resetSliders();
                    saveToHistory('Image Loaded');
                    showLoading(false);
                    showNotification('Image loaded successfully!', 'success');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // ===== TAB SWITCHING =====
        function switchTab(tabName, el) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.sidebar-panel').forEach(p => p.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('panel-' + tabName).classList.add('active');

            textMode = (tabName === 'text');
            canvas.style.cursor = textMode ? 'text' : (tabName === 'draw' ? 'crosshair' : 'default');
        }

        // ===== COLOR ADJUSTMENTS =====
        function applyAdjustments() {
            if (!originalImage) return;

            const brightness = document.getElementById('brightness').value;
            const contrast = document.getElementById('contrast').value;
            const saturate = document.getElementById('saturate').value;
            const hue = document.getElementById('hue').value;
            const blur = document.getElementById('blur').value;
            const grayscale = document.getElementById('grayscale').value;
            const sepia = document.getElementById('sepia').value;
            const invert = document.getElementById('invert').value;
            const opacity = document.getElementById('opacity').value;

            document.getElementById('val-brightness').textContent = brightness + '%';
            document.getElementById('val-contrast').textContent = contrast + '%';
            document.getElementById('val-saturate').textContent = saturate + '%';
            document.getElementById('val-hue').textContent = hue + '¬∞';
            document.getElementById('val-blur').textContent = blur + 'px';
            document.getElementById('val-grayscale').textContent = grayscale + '%';
            document.getElementById('val-sepia').textContent = sepia + '%';
            document.getElementById('val-invert').textContent = invert + '%';
            document.getElementById('val-opacity').textContent = opacity + '%';

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.filter = `brightness(${brightness}%) contrast(${contrast}%) saturate(${saturate}%) hue-rotate(${hue}deg) blur(${blur}px) grayscale(${grayscale}%) sepia(${sepia}%) invert(${invert}%) opacity(${opacity}%)`;
            ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
            ctx.filter = 'none';
        }

        // ===== FILTERS =====
        function applyFilter(filterName, el) {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }

            document.querySelectorAll('.filter-item').forEach(f => f.classList.remove('active'));
            el.classList.add('active');
            currentFilter = filterName;

            const filters = {
                'none': { brightness: 100, contrast: 100, saturate: 100, hue: 0, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'vintage': { brightness: 110, contrast: 85, saturate: 70, hue: 20, grayscale: 0, sepia: 40, blur: 0, invert: 0 },
                'warm': { brightness: 105, contrast: 105, saturate: 130, hue: 10, grayscale: 0, sepia: 15, blur: 0, invert: 0 },
                'cool': { brightness: 105, contrast: 110, saturate: 90, hue: 200, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'dramatic': { brightness: 90, contrast: 150, saturate: 120, hue: 0, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'noir': { brightness: 110, contrast: 130, saturate: 0, hue: 0, grayscale: 100, sepia: 0, blur: 0, invert: 0 },
                'fade': { brightness: 120, contrast: 80, saturate: 80, hue: 0, grayscale: 0, sepia: 10, blur: 0, invert: 0 },
                'vivid': { brightness: 105, contrast: 120, saturate: 180, hue: 0, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'sunset': { brightness: 110, contrast: 110, saturate: 140, hue: 340, grayscale: 0, sepia: 20, blur: 0, invert: 0 },
                'ocean': { brightness: 100, contrast: 110, saturate: 120, hue: 180, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'forest': { brightness: 95, contrast: 110, saturate: 130, hue: 90, grayscale: 0, sepia: 10, blur: 0, invert: 0 },
                'retro': { brightness: 100, contrast: 90, saturate: 80, hue: 15, grayscale: 0, sepia: 50, blur: 0, invert: 0 },
                'cinema': { brightness: 95, contrast: 130, saturate: 85, hue: 5, grayscale: 0, sepia: 15, blur: 0, invert: 0 },
                'neon': { brightness: 110, contrast: 130, saturate: 200, hue: 280, grayscale: 0, sepia: 0, blur: 0, invert: 0 },
                'pastel': { brightness: 115, contrast: 85, saturate: 120, hue: 330, grayscale: 0, sepia: 10, blur: 0.5, invert: 0 }
            };

            const f = filters[filterName] || filters['none'];

            document.getElementById('brightness').value = f.brightness;
            document.getElementById('contrast').value = f.contrast;
            document.getElementById('saturate').value = f.saturate;
            document.getElementById('hue').value = f.hue;
            document.getElementById('grayscale').value = f.grayscale;
            document.getElementById('sepia').value = f.sepia;
            document.getElementById('blur').value = f.blur;
            document.getElementById('invert').value = f.invert;

            applyAdjustments();
            saveToHistory('Filter: ' + filterName);
        }

        // ===== TRANSFORM =====
        function rotateImage(degrees) {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }

            showLoading(true);
            setTimeout(() => {
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                tempCtx.putImageData(imageData, 0, 0);

                const radians = degrees * Math.PI / 180;
                const sin = Math.abs(Math.sin(radians));
                const cos = Math.abs(Math.cos(radians));

                const newWidth = Math.round(canvas.width * cos + canvas.height * sin);
                const newHeight = Math.round(canvas.width * sin + canvas.height * cos);

                canvas.width = newWidth;
                canvas.height = newHeight;

                ctx.clearRect(0, 0, newWidth, newHeight);
                ctx.translate(newWidth / 2, newHeight / 2);
                ctx.rotate(radians);
                ctx.drawImage(tempCanvas, -tempCanvas.width / 2, -tempCanvas.height / 2);
                ctx.setTransform(1, 0, 0, 1, 0, 0);

                updateCurrentImage();
                updateImageInfo();
                saveToHistory('Rotate ' + degrees + '¬∞');
                showLoading(false);
                showNotification('Rotated ' + degrees + '¬∞', 'success');
            }, 50);
        }

        function flipImage(direction) {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }

            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            tempCtx.putImageData(imageData, 0, 0);

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (direction === 'horizontal') {
                ctx.translate(canvas.width, 0);
                ctx.scale(-1, 1);
            } else {
                ctx.translate(0, canvas.height);
                ctx.scale(1, -1);
            }

            ctx.drawImage(tempCanvas, 0, 0);
            ctx.setTransform(1, 0, 0, 1, 0, 0);

            updateCurrentImage();
            saveToHistory('Flip ' + direction);
            showNotification('Flipped ' + direction, 'success');
        }

        function customRotate() {
            const angle = document.getElementById('customRotation').value;
            document.getElementById('val-rotation').textContent = angle + '¬∞';
        }

        // ===== DRAWING =====
        function setDrawMode(mode, el) {
            drawMode = mode;
            document.querySelectorAll('#panel-draw .draw-mode-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function getCanvasCoords(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            return {
                x: (e.clientX - rect.left) * scaleX,
                y: (e.clientY - rect.top) * scaleY
            };
        }

        function onCanvasMouseDown(e) {
            if (!originalImage) return;
            const coords = getCanvasCoords(e);

            if (textMode) {
                placeText(coords.x, coords.y);
                return;
            }

            const currentTab = document.querySelector('.sidebar-tab.active');
            if (!currentTab || !currentTab.textContent.includes('Draw')) return;

            isDrawing = true;
            drawStartX = coords.x;
            drawStartY = coords.y;

            if (drawMode === 'brush' || drawMode === 'eraser') {
                ctx.beginPath();
                ctx.moveTo(coords.x, coords.y);
            }
        }

        function onCanvasMouseMove(e) {
            if (!isDrawing) return;
            const coords = getCanvasCoords(e);

            const color = document.getElementById('drawColor').value;
            const size = parseInt(document.getElementById('brushSize').value);
            const opacityVal = parseInt(document.getElementById('drawOpacity').value) / 100;

            ctx.globalAlpha = opacityVal;

            if (drawMode === 'brush') {
                ctx.strokeStyle = color;
                ctx.lineWidth = size;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.lineTo(coords.x, coords.y);
                ctx.stroke();
            } else if (drawMode === 'eraser') {
                ctx.globalCompositeOperation = 'destination-out';
                ctx.strokeStyle = 'rgba(0,0,0,1)';
                ctx.lineWidth = size;
                ctx.lineCap = 'round';
                ctx.lineTo(coords.x, coords.y);
                ctx.stroke();
                ctx.globalCompositeOperation = 'source-over';
            }

            ctx.globalAlpha = 1;
        }

        function onCanvasMouseUp(e) {
            if (!isDrawing) return;
            isDrawing = false;

            if (!e || !e.clientX) {
                saveToHistory('Draw');
                return;
            }

            const coords = getCanvasCoords(e);
            const color = document.getElementById('drawColor').value;
            const fillColor = document.getElementById('fillColor').value;
            const size = parseInt(document.getElementById('brushSize').value);
            const useFill = document.getElementById('useFill').checked;
            const opacityVal = parseInt(document.getElementById('drawOpacity').value) / 100;

            ctx.globalAlpha = opacityVal;
            ctx.strokeStyle = color;
            ctx.lineWidth = size;
            ctx.lineCap = 'round';

            if (drawMode === 'line') {
                ctx.beginPath();
                ctx.moveTo(drawStartX, drawStartY);
                ctx.lineTo(coords.x, coords.y);
                ctx.stroke();
            } else if (drawMode === 'rect') {
                ctx.beginPath();
                const w = coords.x - drawStartX;
                const h = coords.y - drawStartY;
                if (useFill) {
                    ctx.fillStyle = fillColor;
                    ctx.fillRect(drawStartX, drawStartY, w, h);
                }
                ctx.strokeRect(drawStartX, drawStartY, w, h);
            } else if (drawMode === 'circle') {
                const radius = Math.sqrt(Math.pow(coords.x - drawStartX, 2) + Math.pow(coords.y - drawStartY, 2));
                ctx.beginPath();
                ctx.arc(drawStartX, drawStartY, radius, 0, Math.PI * 2);
                if (useFill) {
                    ctx.fillStyle = fillColor;
                    ctx.fill();
                }
                ctx.stroke();
            } else if (drawMode === 'arrow') {
                drawArrow(drawStartX, drawStartY, coords.x, coords.y, size);
            }

            ctx.globalAlpha = 1;
            updateCurrentImage();
            saveToHistory('Draw: ' + drawMode);
        }

        function drawArrow(fromX, fromY, toX, toY, width) {
            const headLen = width * 4;
            const angle = Math.atan2(toY - fromY, toX - fromX);

            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLen * Math.cos(angle - Math.PI / 6), toY - headLen * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(toX - headLen * Math.cos(angle + Math.PI / 6), toY - headLen * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fillStyle = ctx.strokeStyle;
            ctx.fill();
        }

        // Touch events
        function onCanvasTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            onCanvasMouseDown(mouseEvent);
        }

        function onCanvasTouchMove(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            onCanvasMouseMove(mouseEvent);
        }

        // ===== TEXT =====
        function addText() {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }
            textMode = true;
            canvas.style.cursor = 'text';
            showNotification('Click on the image to place text', 'info');
        }

        function placeText(x, y) {
            const text = document.getElementById('textContent').value;
            if (!text.trim()) {
                showNotification('Please enter some text!', 'error');
                return;
            }

            const font = document.getElementById('textFont').value;
            const size = document.getElementById('textSize').value;
            const color = document.getElementById('textColor').value;
            const strokeColor = document.getElementById('textStroke').value;
            const strokeWidth = document.getElementById('strokeWidth').value;
            const isBold = document.getElementById('boldBtn').classList.contains('active');
            const isItalic = document.getElementById('italicBtn').classList.contains('active');

            let fontStr = '';
            if (isItalic) fontStr += 'italic ';
            if (isBold) fontStr += 'bold ';
            fontStr += size + 'px ' + font;

            ctx.font = fontStr;
            ctx.fillStyle = color;
            ctx.textBaseline = 'top';

            const lines = text.split('\n');
            lines.forEach((line, i) => {
                const lineY = y + (i * size * 1.2);

                if (parseInt(strokeWidth) > 0) {
                    ctx.strokeStyle = strokeColor;
                    ctx.lineWidth = parseInt(strokeWidth);
                    ctx.strokeText(line, x, lineY);
                }
                ctx.fillText(line, x, lineY);
            });

            textMode = false;
            canvas.style.cursor = 'default';
            updateCurrentImage();
            saveToHistory('Text Added');
            showNotification('Text added successfully!', 'success');
        }

        // ===== CROP =====
        function setCropRatio(ratio, el) {
            document.querySelectorAll('.crop-preset-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');

            if (!originalImage) return;

            let w, h;
            const cw = canvas.width;
            const ch = canvas.height;

            switch(ratio) {
                case 'free': w = Math.round(cw * 0.8); h = Math.round(ch * 0.8); break;
                case '1:1': w = h = Math.min(cw, ch) * 0.8; break;
                case '4:3': w = Math.min(cw, ch * 4/3) * 0.8; h = w * 3/4; break;
                case '16:9': w = Math.min(cw, ch * 16/9) * 0.8; h = w * 9/16; break;
                case '3:2': w = Math.min(cw, ch * 3/2) * 0.8; h = w * 2/3; break;
                case '9:16': h = Math.min(ch, cw * 16/9) * 0.8; w = h * 9/16; break;
                default: w = cw * 0.8; h = ch * 0.8;
            }

            document.getElementById('cropX').value = Math.round((cw - w) / 2);
            document.getElementById('cropY').value = Math.round((ch - h) / 2);
            document.getElementById('cropW').value = Math.round(w);
            document.getElementById('cropH').value = Math.round(h);
        }

        function applyCrop() {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }

            const x = parseInt(document.getElementById('cropX').value) || 0;
            const y = parseInt(document.getElementById('cropY').value) || 0;
            const w = parseInt(document.getElementById('cropW').value) || 200;
            const h = parseInt(document.getElementById('cropH').value) || 200;

            if (x < 0 || y < 0 || w <= 0 || h <= 0 || x + w > canvas.width || y + h > canvas.height) {
                showNotification('Invalid crop dimensions!', 'error');
                return;
            }

            showLoading(true);
            setTimeout(() => {
                const imageData = ctx.getImageData(x, y, w, h);
                canvas.width = w;
                canvas.height = h;
                ctx.putImageData(imageData, 0, 0);

                updateCurrentImage();
                updateImageInfo();
                saveToHistory('Crop Applied');
                showLoading(false);
                showNotification('Image cropped successfully!', 'success');
            }, 50);
        }

        function cancelCrop() {
            showNotification('Crop cancelled', 'info');
        }

        // ===== EXPORT =====
        function setFormat(format, el) {
            exportFormat = format;
            document.querySelectorAll('.format-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function downloadImage() {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }
            exportImage();
        }

        function exportImage() {
            if (!originalImage) {
                showNotification('Please upload an image first!', 'error');
                return;
            }

            showLoading(true);
            setTimeout(() => {
                const fileName = document.getElementById('fileName').value || 'photoedit-pro-image';
                const quality = parseInt(document.getElementById('exportQuality').value) / 100;
                const expWidth = parseInt(document.getElementById('exportWidth').value);
                const expHeight = parseInt(document.getElementById('exportHeight').value);

                let exportCanvas = canvas;

                if (expWidth && expHeight) {
                    exportCanvas = document.createElement('canvas');
                    exportCanvas.width = expWidth;
                    exportCanvas.height = expHeight;
                    const expCtx = exportCanvas.getContext('2d');
                    expCtx.drawImage(canvas, 0, 0, expWidth, expHeight);
                }

                let mimeType;
                let ext;
                switch (exportFormat) {
                    case 'jpeg': mimeType = 'image/jpeg'; ext = 'jpg'; break;
                    case 'webp': mimeType = 'image/webp'; ext = 'webp'; break;
                    default: mimeType = 'image/png'; ext = 'png';
                }

                const dataUrl = exportCanvas.toDataURL(mimeType, quality);
                const link = document.createElement('a');
                link.download = `${fileName}.${ext}`;
                link.href = dataUrl;
                link.click();

                showLoading(false);
                showNotification('Image downloaded successfully!', 'success');
            }, 100);
        }

        // ===== UNDO / REDO =====
        function saveToHistory(action) {
            if (historyIndex < history.length - 1) {
                history = history.slice(0, historyIndex + 1);
            }

            if (history.length >= maxHistory) {
                history.shift();
            }

            history.push({
                data: canvas.toDataURL(),
                width: canvas.width,
                height: canvas.height,
                action: action,
                time: new Date().toLocaleTimeString()
            });

            historyIndex = history.length - 1;
        }

        function undo() {
            if (historyIndex <= 0) {
                showNotification('Nothing to undo', 'info');
                return;
            }

            historyIndex--;
            restoreFromHistory();
            showNotification('Undo successful', 'info');
        }

        function redo() {
            if (historyIndex >= history.length - 1) {
                showNotification('Nothing to redo', 'info');
                return;
            }

            historyIndex++;
            restoreFromHistory();
            showNotification('Redo successful', 'info');
        }

        function restoreFromHistory() {
            const state = history[historyIndex];
            const img = new Image();
            img.onload = function() {
                canvas.width = state.width;
                canvas.height = state.height;
                ctx.drawImage(img, 0, 0);
                updateCurrentImage();
                updateImageInfo();
            };
            img.src = state.data;
        }

        // ===== RESET =====
        function resetAll() {
            if (!originalImage) return;

            canvas.width = originalImage.width;
            canvas.height = originalImage.height;
            ctx.drawImage(originalImage, 0, 0);

            resetSliders();
            updateCurrentImage();
            updateImageInfo();
            saveToHistory('Reset');
            showNotification('All changes reset!', 'success');
        }

        function resetSliders() {
            document.getElementById('brightness').value = 100;
            document.getElementById('contrast').value = 100;
            document.getElementById('saturate').value = 100;
            document.getElementById('hue').value = 0;
            document.getElementById('blur').value = 0;
            document.getElementById('grayscale').value = 0;
            document.getElementById('sepia').value = 0;
            document.getElementById('invert').value = 0;
            document.getElementById('opacity').value = 100;

            document.getElementById('val-brightness').textContent = '100%';
            document.getElementById('val-contrast').textContent = '100%';
            document.getElementById('val-saturate').textContent = '100%';
            document.getElementById('val-hue').textContent = '0¬∞';
            document.getElementById('val-blur').textContent = '0px';
            document.getElementById('val-grayscale').textContent = '0%';
            document.getElementById('val-sepia').textContent = '0%';
            document.getElementById('val-invert').textContent = '0%';
            document.getElementById('val-opacity').textContent = '100%';

            document.querySelectorAll('.filter-item').forEach(f => f.classList.remove('active'));
            document.querySelector('.filter-item').classList.add('active');
        }

        // ===== ZOOM =====
        function zoomCanvas(delta) {
            if (delta === 0) {
                currentZoom = 1;
            } else {
                currentZoom = Math.max(0.1, Math.min(5, currentZoom + delta));
            }

            canvas.style.transform = `scale(${currentZoom})`;
            document.getElementById('zoomLevel').textContent = Math.round(currentZoom * 100) + '%';
        }

        // ===== HELPERS =====
        function updateCurrentImage() {
            const img = new Image();
            img.onload = function() {
                currentImage = img;
            };
            img.src = canvas.toDataURL();
        }

        function updateImageInfo() {
            const dim = canvas.width + ' √ó ' + canvas.height + ' px';
            document.getElementById('canvasDimText').textContent = dim;
            document.getElementById('imgDimensions').textContent = dim;

            const dataUrl = canvas.toDataURL();
            const size = Math.round((dataUrl.length * 3) / 4 / 1024);
            document.getElementById('imgSize').textContent = size > 1024 ? (size / 1024).toFixed(1) + ' MB' : size + ' KB';

            document.getElementById('exportWidth').placeholder = canvas.width;
            document.getElementById('exportHeight').placeholder = canvas.height;
        }

        function showNotification(message, type) {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.className = 'notification ' + type + ' show';
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }

        function showLoading(show) {
            document.getElementById('loadingOverlay').classList.toggle('show', show);
        }
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Image to Base64 Converter</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
  background:#f5f7fa;color:#333;min-height:100vh;display:flex;flex-direction:column
}

/* NAV */
nav{
  background:#fff;padding:13px 24px;display:flex;align-items:center;
  border-bottom:1px solid #e8ecf0;box-shadow:0 1px 3px rgba(0,0,0,.04);
  position:sticky;top:0;z-index:100
}
.nav-title{font-weight:700;font-size:1.05rem;color:#4f46e5}
.nav-sub{color:#aaa;font-size:.76rem;margin-left:8px;font-weight:500}
.nav-right{margin-left:auto;display:flex;gap:8px}
.nb{
  padding:8px 16px;border:none;border-radius:8px;font-size:.82rem;
  font-weight:600;cursor:pointer;transition:all .15s;display:flex;
  align-items:center;gap:5px;white-space:nowrap
}
.nb.sec{background:#f0f2f5;color:#666}
.nb.sec:hover{background:#e4e6e9}
.nb.pri{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;
  box-shadow:0 2px 8px rgba(79,70,229,.2)}
.nb.pri:hover{box-shadow:0 4px 14px rgba(79,70,229,.3);transform:translateY(-1px)}

/* UPLOAD */
.upload-wrap{
  display:flex;flex-direction:column;align-items:center;
  padding:40px 20px 36px;
  background:linear-gradient(180deg,#f0ecff 0%,#f5f7fa 100%)
}
.upload-wrap h1{font-size:1.7rem;font-weight:800;color:#222;margin-bottom:6px;text-align:center}
.upload-wrap h1 span{color:#4f46e5}
.upload-wrap p{color:#888;font-size:.9rem;margin-bottom:24px;text-align:center}

#dropZone{
  width:100%;max-width:600px;padding:44px 28px;border:2.5px dashed #c7c4f0;
  border-radius:16px;background:#fff;text-align:center;cursor:pointer;
  transition:all .25s
}
#dropZone:hover,#dropZone.dragover{
  border-color:#4f46e5;background:#faf9ff;transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(79,70,229,.07)
}
.dz-icon{font-size:2.8rem;margin-bottom:10px;opacity:.55}
.dz-text{font-size:1rem;color:#666;font-weight:500;margin-bottom:3px}
.dz-hint{font-size:.82rem;color:#bbb;margin-bottom:16px}
.dz-btn{
  display:inline-block;padding:11px 32px;
  background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;border:none;
  border-radius:30px;font-size:.93rem;font-weight:700;cursor:pointer;
  transition:all .2s;box-shadow:0 4px 14px rgba(79,70,229,.22)
}
.dz-btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(79,70,229,.3)}
.dz-fmt{font-size:.72rem;color:#ccc;margin-top:14px}
#fileInput{display:none}

/* RESULT */
#resultSection{display:none;padding:0 20px 40px}
#resultSection.show{display:block}
.result-container{max-width:900px;margin:0 auto}

/* INFO CARD */
.info-card{
  background:#fff;border-radius:14px;border:1px solid #eef0f3;
  padding:20px 24px;margin-bottom:16px;display:flex;align-items:center;
  gap:18px;box-shadow:0 1px 4px rgba(0,0,0,.03);flex-wrap:wrap
}
.preview-box{
  width:80px;height:80px;border-radius:10px;background:#f5f7fa;
  border:1px solid #e8ecf0;overflow:hidden;flex-shrink:0;
  display:flex;align-items:center;justify-content:center
}
.preview-box img{width:100%;height:100%;object-fit:cover}
.info-details{flex:1;min-width:200px}
.info-name{font-size:.95rem;font-weight:700;color:#333;margin-bottom:6px;word-break:break-all}
.info-grid{display:flex;gap:16px;flex-wrap:wrap}
.info-item{font-size:.78rem;color:#888}
.info-item span{font-weight:700;color:#4f46e5}
.info-actions{display:flex;gap:8px;flex-wrap:wrap}
.ib{
  padding:8px 16px;border:1.5px solid #e0e3e7;border-radius:8px;
  background:#fff;color:#555;font-size:.78rem;font-weight:600;
  cursor:pointer;transition:all .15s;white-space:nowrap
}
.ib:hover{border-color:#4f46e5;color:#4f46e5;background:#faf9ff}
.ib.danger{border-color:#fde2e2;color:#e74c3c}
.ib.danger:hover{background:#fdf2f2;border-color:#e74c3c}

/* FORMAT BAR */
.format-bar{
  background:#fff;border-radius:14px;border:1px solid #eef0f3;
  margin-bottom:16px;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.03)
}
.format-tabs{
  display:flex;border-bottom:1px solid #eef0f3;overflow-x:auto;background:#fafbfc
}
.ftab{
  flex:1;min-width:80px;padding:12px 10px;border:none;background:none;
  color:#999;cursor:pointer;font-size:.78rem;font-weight:600;
  transition:all .15s;text-align:center;white-space:nowrap;
  border-bottom:2.5px solid transparent
}
.ftab:hover{color:#4f46e5;background:#faf9ff}
.ftab.active{color:#4f46e5;border-bottom-color:#4f46e5;background:#fff}
.format-content{padding:16px 20px}
.format-label{
  font-size:.78rem;color:#999;font-weight:600;margin-bottom:8px;
  display:flex;justify-content:space-between;align-items:center
}
.char-count{font-size:.72rem;color:#bbb;font-weight:500}
.code-box{
  position:relative;background:#f8f9fb;border:1px solid #e8ecf0;
  border-radius:10px;overflow:hidden
}
.code-area{
  width:100%;min-height:140px;max-height:300px;padding:14px 16px;
  font-family:'Courier New',monospace;font-size:.78rem;color:#444;
  border:none;background:transparent;resize:vertical;outline:none;
  line-height:1.6;word-break:break-all
}
.code-actions{
  display:flex;gap:6px;padding:8px 12px;border-top:1px solid #eef0f3;background:#fafbfc
}
.cb{
  padding:6px 14px;border:1.5px solid #e0e3e7;border-radius:6px;
  background:#fff;color:#555;font-size:.75rem;font-weight:600;
  cursor:pointer;transition:all .12s;display:flex;align-items:center;gap:4px
}
.cb:hover{border-color:#4f46e5;color:#4f46e5}
.cb.copied{border-color:#10b981;color:#10b981;background:#ecfdf5}

/* REVERSE */
.reverse-card{
  background:#fff;border-radius:14px;border:1px solid #eef0f3;
  padding:20px 24px;margin-bottom:16px;box-shadow:0 1px 4px rgba(0,0,0,.03)
}
.reverse-title{font-size:.92rem;font-weight:700;color:#333;margin-bottom:4px}
.reverse-desc{font-size:.78rem;color:#999;margin-bottom:12px}
.reverse-input{
  width:100%;min-height:90px;padding:12px 14px;border:1.5px solid #e0e3e7;
  border-radius:10px;background:#fafafa;color:#333;font-family:'Courier New',monospace;
  font-size:.78rem;resize:vertical;outline:none;line-height:1.5
}
.reverse-input:focus{border-color:#4f46e5;background:#fff}
.reverse-actions{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.reverse-preview{
  margin-top:12px;display:none;text-align:center;padding:14px;
  background:#f8f9fb;border-radius:10px;border:1px solid #eef0f3
}
.reverse-preview.show{display:block}
.reverse-preview img{max-width:100%;max-height:300px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.08)}

/* TOAST */
.toast{
  position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(80px);
  background:#fff;color:#333;padding:12px 22px;border-radius:10px;
  font-size:.85rem;font-weight:500;box-shadow:0 4px 20px rgba(0,0,0,.1);
  z-index:300;transition:transform .3s;border-left:4px solid #4f46e5
}
.toast.err{border-left-color:#e74c3c}
.toast.show{transform:translateX(-50%) translateY(0)}

/* FOOTER */
footer{
  margin-top:auto;text-align:center;padding:18px;color:#bbb;
  font-size:.76rem;border-top:1px solid #eef0f3;background:#fff
}
footer span{color:#4f46e5;font-weight:600}

@media(max-width:768px){
  .upload-wrap{padding:28px 16px 24px}
  .upload-wrap h1{font-size:1.35rem}
  .info-card{padding:14px;gap:12px}
  .preview-box{width:56px;height:56px}
  .format-content{padding:12px 14px}
  .nav-sub{display:none}
  .nb span{display:none}
}
@media(max-width:480px){
  .upload-wrap h1{font-size:1.15rem}
  #dropZone{padding:28px 16px}
  .dz-icon{font-size:2.2rem}
  .ftab{min-width:60px;padding:10px 5px;font-size:.68rem}
  .info-grid{gap:8px}
  .code-area{font-size:.7rem;min-height:100px}
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <span class="nav-title">Image to Base64</span>
  <span class="nav-sub">Free Converter</span>
  <div class="nav-right" id="navBtns" style="display:none">
    <button class="nb sec" onclick="clearAll()">‚úï <span>Clear</span></button>
    <button class="nb pri" onclick="document.getElementById('fileInput').click()">+ <span>New Image</span></button>
  </div>
</nav>

<!-- UPLOAD -->
<div class="upload-wrap" id="uploadWrap">
  <h1>Image to <span>Base64</span></h1>
  <p>Convert any image to Base64 string instantly. Paste, drag or select.</p>
  <div id="dropZone">
    <div class="dz-icon">üñºÔ∏è</div>
    <div class="dz-text">Drag & drop your image here</div>
    <div class="dz-hint">or</div>
    <button class="dz-btn" onclick="document.getElementById('fileInput').click()">Select Image</button>
    <div class="dz-fmt">JPG, PNG, WEBP, GIF, BMP, SVG, ICO</div>
  </div>
  <input type="file" id="fileInput" accept="image/*">
</div>

<!-- RESULT -->
<div id="resultSection">
  <div class="result-container">

    <!-- INFO CARD -->
    <div class="info-card">
      <div class="preview-box"><img id="previewImg" src="" alt=""></div>
      <div class="info-details">
        <div class="info-name" id="fileName">-</div>
        <div class="info-grid">
          <div class="info-item">Type: <span id="fileType">-</span></div>
          <div class="info-item">Size: <span id="fileSize">-</span></div>
          <div class="info-item">Dimensions: <span id="fileDims">-</span></div>
          <div class="info-item">Base64: <span id="b64Size">-</span></div>
        </div>
      </div>
      <div class="info-actions">
        <button class="ib" onclick="copyAll()">üìã Copy Base64</button>
        <button class="ib" onclick="downloadTxt()">‚§ì Save .txt</button>
        <button class="ib danger" onclick="clearAll()">‚úï Clear</button>
      </div>
    </div>

    <!-- FORMAT TABS -->
    <div class="format-bar">
      <div class="format-tabs">
        <button class="ftab active" data-f="datauri" onclick="switchFormat(this)">Data URI</button>
        <button class="ftab" data-f="raw" onclick="switchFormat(this)">Raw Base64</button>
        <button class="ftab" data-f="css" onclick="switchFormat(this)">CSS</button>
        <button class="ftab" data-f="html" onclick="switchFormat(this)">HTML</button>
        <button class="ftab" data-f="markdown" onclick="switchFormat(this)">Markdown</button>
        <button class="ftab" data-f="json" onclick="switchFormat(this)">JSON</button>
      </div>
      <div class="format-content">
        <div class="format-label">
          <span id="formatTitle">Data URI</span>
          <span class="char-count" id="charCount">0 characters</span>
        </div>
        <div class="code-box">
          <textarea class="code-area" id="codeArea" readonly></textarea>
          <div class="code-actions">
            <button class="cb" id="copyBtn" onclick="copyCode()">üìã Copy</button>
            <button class="cb" onclick="selectCode()">‚òê Select All</button>
            <button class="cb" onclick="downloadCode()">‚§ì Download</button>
          </div>
        </div>
      </div>
    </div>

    <!-- REVERSE -->
    <div class="reverse-card">
      <div class="reverse-title">üîÑ Base64 to Image</div>
      <div class="reverse-desc">Paste a Base64 string to convert back to image</div>
      <textarea class="reverse-input" id="reverseInput" placeholder="Paste Base64 or Data URI here..."></textarea>
      <div class="reverse-actions">
        <button class="ib" onclick="decodeB64()">üîÑ Convert</button>
        <button class="ib" onclick="dlDecoded()">‚§ì Download</button>
        <button class="ib" onclick="clearReverse()">‚úï Clear</button>
      </div>
      <div class="reverse-preview" id="reversePreview">
        <img id="reverseImg" src="" alt="">
      </div>
    </div>

  </div>
</div>

<!-- FOOTER -->
<footer>
  <span>Image to Base64</span> ‚Äî 100% browser-based. Your files never leave your device.
</footer>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
let D={file:null,dataUri:'',raw:'',mime:'',w:0,h:0};
let curFmt='datauri';

document.addEventListener('DOMContentLoaded',()=>{
  const fi=document.getElementById('fileInput');
  const dz=document.getElementById('dropZone');

  fi.addEventListener('change',e=>{if(e.target.files[0])process(e.target.files[0]);fi.value=''});
  dz.addEventListener('click',e=>{if(e.target.tagName!=='BUTTON')fi.click()});

  ['dragenter','dragover'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault();dz.classList.add('dragover')}));
  ['dragleave','drop'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault();dz.classList.remove('dragover')}));
  dz.addEventListener('drop',e=>{if(e.dataTransfer.files[0])process(e.dataTransfer.files[0])});

  document.addEventListener('paste',e=>{
    const items=e.clipboardData?.items;
    if(!items)return;
    for(let item of items){
      if(item.type.startsWith('image/')){e.preventDefault();process(item.getAsFile());break}
    }
  });
});

function process(file){
  if(!file||!file.type.startsWith('image/')){toast('Select a valid image',true);return}
  if(file.size>50*1024*1024){toast('Max 50MB',true);return}
  D.file=file;D.mime=file.type;
  const r=new FileReader();
  r.onload=e=>{
    D.dataUri=e.target.result;
    D.raw=D.dataUri.split(',')[1];
    const img=new Image();
    img.onload=()=>{D.w=img.naturalWidth;D.h=img.naturalHeight;showResult()};
    img.onerror=()=>{D.w=0;D.h=0;showResult()};
    img.src=D.dataUri;
  };
  r.readAsDataURL(file);
}

function showResult(){
  document.getElementById('previewImg').src=D.dataUri;
  document.getElementById('fileName').textContent=D.file.name;
  document.getElementById('fileType').textContent=D.mime;
  document.getElementById('fileSize').textContent=fmtSize(D.file.size);
  document.getElementById('fileDims').textContent=D.w&&D.h?D.w+' √ó '+D.h+' px':'Unknown';
  document.getElementById('b64Size').textContent=fmtSize(D.raw.length);

  document.getElementById('resultSection').classList.add('show');
  document.getElementById('navBtns').style.display='flex';

  // Shrink upload
  const uw=document.getElementById('uploadWrap');
  uw.querySelector('h1').style.display='none';
  uw.querySelector('p').style.display='none';
  uw.style.padding='16px 20px 16px';
  const dz=document.getElementById('dropZone');
  dz.style.padding='16px 20px';
  dz.querySelector('.dz-icon').style.display='none';
  dz.querySelector('.dz-hint').style.display='none';
  dz.querySelector('.dz-fmt').style.display='none';
  dz.querySelector('.dz-text').textContent='Drop another image or';
  dz.querySelector('.dz-btn').textContent='Select New Image';

  updateCode();
  toast('‚úì Converted successfully!');
  document.getElementById('resultSection').scrollIntoView({behavior:'smooth',block:'start'});
}

function switchFormat(btn){
  document.querySelectorAll('.ftab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  curFmt=btn.dataset.f;
  updateCode();
}

function updateCode(){
  const a=document.getElementById('codeArea');
  let c='',t='';
  switch(curFmt){
    case'datauri':c=D.dataUri;t='Data URI';break;
    case'raw':c=D.raw;t='Raw Base64';break;
    case'css':
      c=`.element {\n  background-image: url("${D.dataUri}");\n  background-size: cover;\n  background-position: center;\n  width: ${D.w}px;\n  height: ${D.h}px;\n}`;
      t='CSS Background';break;
    case'html':
      c=`<img src="${D.dataUri}" alt="${esc(D.file.name)}" width="${D.w}" height="${D.h}" />`;
      t='HTML <img>';break;
    case'markdown':
      c=`![${D.file.name}](${D.dataUri})`;t='Markdown';break;
    case'json':
      c=JSON.stringify({filename:D.file.name,mimeType:D.mime,width:D.w,height:D.h,fileSize:D.file.size,base64:D.raw},null,2);
      t='JSON';break;
  }
  a.value=c;
  document.getElementById('formatTitle').textContent=t;
  document.getElementById('charCount').textContent=c.length.toLocaleString()+' characters';
}

function copyCode(){
  const a=document.getElementById('codeArea');
  const b=document.getElementById('copyBtn');
  navigator.clipboard.writeText(a.value).then(()=>{
    b.classList.add('copied');b.innerHTML='‚úì Copied!';
    toast('‚úì Copied to clipboard!');
    setTimeout(()=>{b.classList.remove('copied');b.innerHTML='üìã Copy'},2000);
  }).catch(()=>{a.select();document.execCommand('copy');toast('‚úì Copied!')});
}

function copyAll(){
  navigator.clipboard.writeText(D.dataUri).then(()=>toast('‚úì Data URI copied!')).catch(()=>toast('Copy failed',true));
}

function selectCode(){
  const a=document.getElementById('codeArea');
  a.select();a.setSelectionRange(0,a.value.length);
  toast('All text selected');
}

function downloadTxt(){
  dl(D.dataUri,D.file.name.replace(/\.[^.]+$/,'')+'-base64.txt','text/plain');
  toast('‚§ì Saved as .txt');
}

function downloadCode(){
  const c=document.getElementById('codeArea').value;
  let ext='txt';
  if(curFmt==='css')ext='css';
  else if(curFmt==='html')ext='html';
  else if(curFmt==='json')ext='json';
  else if(curFmt==='markdown')ext='md';
  dl(c,D.file.name.replace(/\.[^.]+$/,'')+'-base64.'+ext,'text/plain');
  toast('‚§ì Downloaded');
}

function dl(content,name,type){
  const b=new Blob([content],{type});
  const u=URL.createObjectURL(b);
  const a=document.createElement('a');
  a.href=u;a.download=name;
  document.body.appendChild(a);a.click();
  document.body.removeChild(a);URL.revokeObjectURL(u);
}

function clearAll(){
  D={file:null,dataUri:'',raw:'',mime:'',w:0,h:0};
  document.getElementById('resultSection').classList.remove('show');
  document.getElementById('navBtns').style.display='none';
  document.getElementById('codeArea').value='';
  clearReverse();

  // Restore upload
  const uw=document.getElementById('uploadWrap');
  uw.querySelector('h1').style.display='';
  uw.querySelector('p').style.display='';
  uw.style.padding='';
  const dz=document.getElementById('dropZone');
  dz.style.padding='';
  dz.querySelector('.dz-icon').style.display='';
  dz.querySelector('.dz-hint').style.display='';
  dz.querySelector('.dz-fmt').style.display='';
  dz.querySelector('.dz-text').textContent='Drag & drop your image here';
  dz.querySelector('.dz-btn').textContent='Select Image';

  toast('Cleared');
}

// REVERSE
function decodeB64(){
  let inp=document.getElementById('reverseInput').value.trim();
  if(!inp){toast('Paste Base64 first',true);return}
  let src=inp;
  if(!inp.startsWith('data:')){
    let m='image/png';
    if(inp.startsWith('/9j/'))m='image/jpeg';
    else if(inp.startsWith('iVBOR'))m='image/png';
    else if(inp.startsWith('R0lGOD'))m='image/gif';
    else if(inp.startsWith('UklGR'))m='image/webp';
    else if(inp.startsWith('PHN2Z')||inp.startsWith('PD94b'))m='image/svg+xml';
    src=`data:${m};base64,${inp}`;
  }
  const img=document.getElementById('reverseImg');
  img.onload=()=>{document.getElementById('reversePreview').classList.add('show');toast('‚úì Image decoded!')};
  img.onerror=()=>{document.getElementById('reversePreview').classList.remove('show');toast('Invalid Base64',true)};
  img.src=src;
}

function dlDecoded(){
  const img=document.getElementById('reverseImg');
  if(!img.src||img.src===location.href){toast('Decode first',true);return}
  const a=document.createElement('a');a.href=img.src;
  let ext='png';
  if(img.src.includes('jpeg'))ext='jpg';
  else if(img.src.includes('gif'))ext='gif';
  else if(img.src.includes('webp'))ext='webp';
  a.download='decoded.'+ext;
  document.body.appendChild(a);a.click();document.body.removeChild(a);
  toast('‚§ì Downloaded');
}

function clearReverse(){
  document.getElementById('reverseInput').value='';
  document.getElementById('reversePreview').classList.remove('show');
  document.getElementById('reverseImg').src='';
}

function fmtSize(b){
  if(b<1024)return b+' B';
  if(b<1048576)return(b/1024).toFixed(1)+' KB';
  return(b/1048576).toFixed(2)+' MB';
}
function esc(s){const d=document.createElement('div');d.textContent=s;return d.innerHTML}
function toast(m,e){
  const t=document.getElementById('toast');
  t.textContent=m;t.className='toast'+(e?' err':'');
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2800);
}
</script>
</body>
</html>
